<html>

<head>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/metro.min.css">
    <link rel="stylesheet" href="../css/metro-icons.min.css">
    <link rel="stylesheet" href="../css/default.css">
    <link rel="stylesheet" href="../css/default.date.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>
    <!-- Titlebar -->
    <div id="titlebar">
        <p id="save-status"></p>
        <div id="titlebar-control">
            <p id="minimize">-</p>
            <p id="maximize">â–¡</p>
            <p id="close">x</p>
        </div>
    </div>

    <!-- Menu -->
    <div data-role="appbar" class="appbar" data-expand-point="md">
        <a class="brand" id="branding">JournalBear</a>
        <ul class="app-bar-menu">
            <li>
                <a class="app-bar-item dropdown-toggle">File</a>
                <ul class="d-menu" data-role="dropdown">
                    <li><a id="newJournal">New Journal</a></li>
                    <li><a id="open">Open</a></li>
                    <li><a id="save">Save</a></li>
                    <li><a id="export">Export to HTML</a></li>
                </ul>
            </li>
            <li>
                <a class="dropdown-toggle">Entry</a>
                <ul class="d-menu" data-role="dropdown">
                    <li><a id="newEntry">New Entry</a></li>
                    <li><a id="updateEntry">Update Entry</a></li>
                    <li><a id="search">Search</a></li>
                    <li><a id="sentimentAnalysis">Your Statistics</a></li>
                </ul>
            </li>
            <li>
                <a class="dropdown-toggle">Preferences</a>
                <ul class="d-menu" data-role="dropdown">
                    <li><a id="settingsButton">Settings</a></li>
                    <li><a id="changePassword">Change Password</a></li>
                </ul>
            </li>
            <li>
                <a class="dropdown-toggle">Help</a>
                <ul class="d-menu" data-role="dropdown">
                    <li><a id="aboutButton">About</a></li>
                    <li><a id="introButton">Getting Started</a></li>
                    <li>
                        <a href="https://journalbear.wordpress.com/2017/12/02/markdown-formatting/">
                            Markdown formatting help
                        </a>
                    </li>
                    <li>
                        <a href="https://journalbear.wordpress.com/contact/" target="_blank">
                            Contact Us
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- Main Page starts here -->
    <div class="flex-grid" style="margin-top: 10px;">
        <div id="journal-mode" style="display: none" class="row">
            <div id="list" class="cell colspan6">

            </div>
            <div id="content" class="cell colspan6">

            </div>
        </div>
        <div id="welcome-page">
            <div class="row cell-auto-size">
                <div class="cell" style="padding-right: 20px">
                    <div style="margin-left: 40px;">
                        <p class="welcome-page-title">
                            Get Started
                        </p>
                        <p>
                            <a id="tutorial" style="font-size: 16px" href="#">
                                Follow our Getting Started tutorial
                            </a>
                        </p>
                        <p>
                            <a style="font-size: 16px;" target="_blank" href="https://github.com/yrahul3910/journal/issues">
                                Request a feature or report a bug
                            </a>
                        </p>
                        <p>
                            <a style="font-size: 16px;" target="_blank" href="https://github.com/yrahul3910/journal">
                                View our source code
                            </a>
                        </p>
                        <p>
                            <a style="font-size: 16px;" target="_blank" href="https://journalbear.wordpress.com/contact/">
                                Leave us a message
                            </a>
                        </p>

                        <p class="welcome-page-title" style="margin-top: 40px;">
                            Help
                        </p>
                        <p>
                            <a style="font-size: 16px;" target="_blank" href="https://journalbear.wordpress.com/2017/12/02/markdown-formatting/">
                                Markdown Formatting Help
                            </a>
                        </p>
                        <p>
                            <a style="font-size: 16px" target="_blank" href="https://www.wikiwand.com/en/Advanced_Encryption_Standard">
                                Learn more about the encryption algorithm we use
                            </a>
                        </p>
                    </div>
                </div>
                <div class="cell" style="padding: 0">
                    <p class="welcome-page-title">
                        What's New
                    </p>
                    <ul class="main-page-list" style="margin-right: 35px;">
                        <li>Added NSFW marker to entries</li>
                        <li>Progress is now shown while saving files</li>
                        <li>You can now export your entries to HTML!</li>
                        <li>Updated search: deprecated search by date and added a more powerful search dialog</li>
                        <li>Dropped Bootstrap requirement</li>
                        <li>UI Enhancements</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- New entry dialog -->
    <div data-role="dialog" id="editDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">New Entry</div>
        <div class="dialog-content">
            <div id="addEntryError"></div>

            <!-- Single form layout -->
            <div class="entry-form">
                <!-- Date and Mood Row -->
                <div class="form-row">
                    <div class="form-field">
                        <label for="date">Date</label>
                        <input id="date" type="text" class="datepicker" />
                    </div>
                    <div class="form-field">
                        <label for="entrySentiment">How are you feeling?</label>
                        <select id="entrySentiment">
                            <option>Happy</option>
                            <option>Sad</option>
                            <option>Angry</option>
                            <option>Loved</option>
                            <option>Excited</option>
                            <option>Neutral</option>
                        </select>
                    </div>
                </div>

                <!-- Entry Text -->
                <div class="form-field">
                    <label for="entryTextarea">Your entry</label>
                    <div class="textarea-hint">
                        Supports Markdown: *italic*, **bold**, [link](url)
                    </div>
                    <textarea id="entryTextarea" rows="12" placeholder="What's on your mind?"></textarea>
                </div>

                <!-- Emoji Picker Toggle -->
                <div class="emoji-toggle-wrapper">
                    <button type="button" id="emoji-toggle-btn" class="secondary-button">
                        <img class="emoji" src="../emoji/smile.png" style="width: 18px; height: 18px; vertical-align: middle;" />
                        Add Emoji
                    </button>
                </div>

                <!-- Emoji Picker (Hidden by default) -->
                <div id="emoji-picker" class="emoji-picker-container" style="display: none;">
                    <ul class="tabs" data-role="materialtabs">
                        <li><a href="#activity">Activity</a></li>
                        <li><a href="#faces-reactions">Faces</a></li>
                        <li><a href="#food-drink">Food</a></li>
                        <li><a href="#nature-emojis">Nature</a></li>
                        <li><a href="#object-emojis">Objects</a></li>
                        <li><a href="#symbols-flags">Symbols</a></li>
                        <li><a href="#travel-emojis">Travel</a></li>
                        <li><a href="#other-emoji">Other</a></li>
                    </ul>
                    <div class="targets">
                        <div id="activity"></div>
                        <div id="faces-reactions"></div>
                        <div id="food-drink"></div>
                        <div id="nature-emojis"></div>
                        <div id="object-emojis"></div>
                        <div id="symbols-flags"></div>
                        <div id="travel-emojis"></div>
                        <div id="other-emoji"></div>
                    </div>
                </div>

                <!-- Attachments and NSFW -->
                <div class="form-row">
                    <div class="form-field" id="attachmentInput">
                        <label>Add photos</label>
                        <div class="file-drop-zone" id="fileDropZone">
                            <input type="file" id="selectFile" accept="image/*" multiple style="display: none;">
                            <div class="drop-zone-content">
                                <svg class="drop-zone-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="17 8 12 3 7 8"></polyline>
                                    <line x1="12" y1="3" x2="12" y2="15"></line>
                                </svg>
                                <p class="drop-zone-text">
                                    <span class="drop-zone-highlight">Click to upload</span> or drag and drop
                                </p>
                                <p class="drop-zone-hint">PNG, JPG, WEBP, AVIF, APNG, GIF</p>
                            </div>
                            <div class="file-list" id="fileList"></div>
                        </div>
                    </div>
                    <div class="form-field nsfw-field">
                        <label>&nbsp;</label>
                        <button type="button" id="add-nsfw-label" class="nsfw-toggle">
                            Mark as NSFW
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="dialog-actions">
            <button class="button" id="preview">Preview</button>
            <button class="button" id="addEntry">Add Entry</button>
            <button class="button alert" id="cancelEntry">Cancel</button>
        </div>
    </div>

    <!-- Error with new entry dialog -->
    <div data-role="dialog" id="errDialog" class="dialog" data-close-button="true" data-overlay="true" data-type="alert">
        <div class="dialog-title">Could not perform action</div>
        <p>Please open a journal or create a new one first</p>
    </div>

    <!-- New journal password entry dialog -->
    <div data-role="dialog" id="newJournalDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">New Journal</div>
        <div class="dialog-content">
            <div id="newJournalError"></div>
            <div><span id="encryptionNotice">Your journal will be encrypted. Please enter a strong password. It's
                    recommended to use a passphrase instead, but it's optional.</span></div>
            <div class="input-control password">
                <input type="password" id="password">
            </div>
            <div><span>Please re-enter your password</span></div>
            <div class="input-control password">
                <input type="password" id="confirmPassword">
            </div>
        </div>
        <div class="dialog-actions">
            <button class="button" id="confirmNewJournal">Create New Journal</button>
            <button class="button alert" id="cancelNewJournal">Cancel</button>
        </div>
    </div>

    <!-- Decrypt dialog -->
    <div data-role="dialog" id="decryptDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">Decrypt Journal</div>
        <div class="dialog-content">
            <div><span id="prompt">Please enter the password to decrypt</span></div>
            <div class="input-control password">
                <input type="password" id="unlock">
            </div>
        </div>
        <div class="dialog-actions">
            <button class="button" id="decryptJournal">Decrypt</button>
            <button class="button alert" id="cancelDecrypt">Cancel</button>
        </div>
    </div>

    <!-- About dialog -->
    <div data-role="dialog" id="aboutDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">About</div>
        <div class="dialog-content">
            <p><b>JournalBear 6.0</b><br />
                By <b>Rahul Yedida</b></p>
            <p>JournalBear is a free and open source software. None of your data is collected. If you like the
                software,
                consider spreading the word to support it.</p>
            <p>Want to get involved? Check out our GitHub repo <a target="_blank" href="https://github.com/yrahul3910/journal">here!</a></a></p>
            <hr>
            <b>Credits</b><br><br>
            <ul>
                <li>Bhavana KV</li>
                <li>Vaisakh M</li>
            </ul>
        </div>
    </div>

    <!-- Search dialog -->
    <div data-role="dialog" id="searchDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">Search</div>
        <div class="dialog-content">
            <p class="h3">Search by attachment</p>
            <div class="row" style="margin: 10px">
                <label class="switch">
                    <input type="checkbox" id="hasAttachment">
                    <span class="check"></span>
                    <span class="caption">Has attachment</span>
                </label>
            </div>
            <p class="h3">Search by text</p>
            <div class="row" style="margin: 10px">
                <div class="input-control">
                    <input type="text" id="searchQuery" placeholder="Search query" />
                </div>
            </div>
            <p class="h3">Search by emotion</p>
            <div class="row" style="margin: 10px">
                <select id="searchSentiment" style="width: 25%">
                    <option value="">All emotions</option>
                    <option>Happy</option>
                    <option>Sad</option>
                    <option>Angry</option>
                    <option>Loved</option>
                    <option>Excited</option>
                    <option>Neutral</option>
                </select>
            </div>
        </div>
        <div class="dialog-actions">
            <button class="button" id="searchButton">Search</button>
        </div>
    </div>

    <!-- Settings dialog -->
    <div data-role="dialog" id="settingsDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">Settings</div>
        <div class="dialog-content">
            <div style="margin-bottom: 20px;">
                <h3 style="margin-top: 0; margin-bottom: 8px; font-size: 16px; font-weight: 600;">Appearance</h3>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input id="darkThemeEnable" type="checkbox">
                        <span>Dark Mode</span>
                    </label>
                </div>
                <p style="margin-top: 8px; font-size: 13px; color: #64748b;">
                    Automatically syncs with your system preferences
                </p>
            </div>
        </div>
    </div>

    <!-- Statistics dialog -->
    <div data-role="dialog" id="sentimentDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">Statistics</div>
        <div class="dialog-content">
            <div class="row">
                <div class="col-md-6">
                    <p class="text-center">Percentage of emotions</p>
                </div>
                <div class="col-md-6">
                    <select id="sentimentYearsSelect" style="width: 100px; margin-left: 10px;">
                        <option>All</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <canvas id="sentimentRatioChart" height="250px"></canvas>
                </div>
            </div>
            <div class="row" style="margin-top: 20px">
                <div class="col-md-6 col-md-offset-1">
                    <span>Total entry count: </span>
                    <span id="totalEntriesCount"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Introduction dialog -->
    <div data-role="dialog" id="introDialog" class="dialog" data-overlay="true" data-overlay-color="#1d1d1d"
        data-overlay-click-close="true" style="visibility: hidden;">
        <div class="dialog-title">Welcome to JournalBear!</div>
        <div class="dialog-content">
            <div data-role="wizard">
                <section>
                    <div class="page-content">
                        <p class="h3">Starting off</p>
                        <p class="h5">
                            You can start off by going to File - New Journal. Specify a password, but
                            remember it! There's no way to recover a lost password.
                        </p>
                    </div>
                </section>
                <section>
                    <div class="page-content">
                        <p class="h3">Adding daily entries</p>
                        <p class="h5">
                            You can add new entries by going to Entry - New Entry. Entries are styled
                            by Markdown. If you don't know how it works, it's okay! Regular text is
                            valid Markdown too!
                        </p>
                        <p class="h5">
                            You can add images to your daily entry as well. Add as many as you want!
                        </p>
                        <p class="h5">
                            You can also add how you're feeling today. Is the list
                            inadequate? <a target="_blank" href="https://github.com/yrahul3910/journal/issues">Raise an
                                issue.</a>
                        </p>
                    </div>
                </section>
                <section>
                    <div class="page-content">
                        <p class="h3">More Markdown features</p>
                        <p class="h5">
                            JournalBear supports emojis, tables, code, and more Markdown features!
                            <a target="_blank" href="https://journalbear.wordpress.com/2017/12/02/markdown-formatting/">
                                Here's a brief list of how you can add these to your entry.
                            </a>
                        </p>
                    </div>
                </section>
                <section>
                    <div class="page-content">
                        <p class="h3">Getting help</p>
                        <p class="h5">
                            If you need any sort of help, you can send a message. Although the preferred
                            method is to raise an issue on GitHub, if you're not a developer or
                            don't have a GitHub account, you can leave a message <a target="_blank" href="https://journalbear.wordpress.com/contact/">here.</a>
                        </p>
                        <p class="h5">
                            Feel free to leave your name as "Anonymous" if you wish :)
                        </p>
                    </div>
                </section>
            </div>
        </div>
        <div class="dialog-actions"></div>
    </div>

    <!-- Preview dialog -->
    <div data-role="dialog" id="previewDialog" class="dialog" data-close-button="true" data-overlay="true"
        data-overlay-color="#1d1d1d" data-overlay-click-close="true" style="visibility: hidden;">
        <div style="max-height: 300px; overflow: scroll" id="renderedMarkdown">
        </div>
    </div>
    <!-- Scripts start here -->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/metro.min.js"></script>
    <script src="../js/picker.js"></script>
    <script src="../js/picker.date.js"></script>

    <script>
        $(document).ready(() => {
            $('#date').pickadate();
            //$('.tabcontrol').tabcontrol();
            require('./render.js');
        });
    </script>
</body>

</html>
